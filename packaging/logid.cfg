// JuhRadial MX - logid Configuration
// Configures Logitech MX Master 4/3S/3 mice with scroll, DPI, and button settings
//
// Installation:
//   1. Install logiops: sudo dnf install logiops
//   2. Copy this file: sudo cp logid.cfg /etc/logid.cfg
//   3. Enable and start: sudo systemctl enable --now logid
//   4. Verify: sudo logid -v (press haptic button - should see F19)
//
// CID Reference (MX Master 4):
//   0x1a0 (416) = Gesture button (thumb button for radial menu)
//   0xd4 (212)  = Haptic feedback button (NOT for radial menu)
//   0xc3 (195)  = Gesture button (MX Master 3/3S style)
//   0x52 (82)   = Middle click
//   0x53 (83)   = Back button
//   0x56 (86)   = Forward button
//
// Key Code Reference:
//   KEY_F19 = 189 (used for press event)
//
// For troubleshooting, see: https://github.com/PixlOne/logiops/wiki

devices: ({
    name: "MX Master 4";

    // ═══════════════════════════════════════════════════════════════
    // SMARTSHIFT - Auto-switch between ratchet and free-spin modes
    // ═══════════════════════════════════════════════════════════════
    // on: true = auto-switch enabled, false = locked to ratchet mode
    // threshold: 1-255, lower = switches to free-spin faster
    //            Recommended: 15-30 for responsive, 40-60 for controlled
    smartshift: {
        on: true;
        threshold: 20;
    };

    // ═══════════════════════════════════════════════════════════════
    // HIRESSCROLL - High-resolution scroll wheel settings
    // ═══════════════════════════════════════════════════════════════
    // hires: true = high resolution (more scroll events, feels faster)
    //        false = low resolution (fewer events, feels slower)
    // invert: true = natural scrolling (reverse direction)
    // target: true = send scroll events directly to focused window
    hiresscroll: {
        hires: true;
        invert: false;
        target: false;
    };

    // ═══════════════════════════════════════════════════════════════
    // DPI - Pointer speed (controlled via JuhRadial MX Settings)
    // ═══════════════════════════════════════════════════════════════
    // Range: 400-8000 for MX Master 4
    // Note: Can also be changed via daemon D-Bus without restarting logid
    dpi: 1000;

    // ═══════════════════════════════════════════════════════════════
    // BUTTONS - Button remapping
    // ═══════════════════════════════════════════════════════════════
    buttons: ({
        // Gesture button (CID 0x1a0 / 416 decimal)
        // Must be diverted to capture on Wayland
        // Maps to F19 which JuhRadial MX daemon listens for
        cid: 0x1a0;
        divert: true;
        action = {
            type: "Keypress";
            keys: ["KEY_F19"];
        };
    });
},
// Also support MX Master 3S and MX Master 3
{
    name: "MX Master 3S";
    smartshift: { on: true; threshold: 20; };
    hiresscroll: { hires: true; invert: false; target: false; };
    dpi: 1000;
    buttons: ({
        cid: 0xc3;
        divert: true;
        action = { type: "Keypress"; keys: ["KEY_F19"]; };
    });
},
{
    name: "MX Master 3";
    smartshift: { on: true; threshold: 20; };
    hiresscroll: { hires: true; invert: false; target: false; };
    dpi: 1000;
    buttons: ({
        cid: 0xc3;
        divert: true;
        action = { type: "Keypress"; keys: ["KEY_F19"]; };
    });
});
